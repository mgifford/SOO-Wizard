
steps:

  - id: methodology
    title: "Contracting Context & Budget Range"
    help: "Select the primary contracting context and provide a rough budget range for this project. This helps with planning and vendor expectations. The budget range is for context only, not a binding commitment."
    fields:
      - id: context
        type: select
        label: "Primary contracting context"
        options:
          - value: "new_dev"
            label: "New development"
          - value: "legacy_maint"
            label: "Maintenance of legacy system"
          - value: "ops_support"
            label: "Operations and support"
          - value: "discovery"
            label: "Discovery or research"
          - value: "migration"
            label: "Migration"
        default: "new_dev"
      - id: budget_range
        type: text
        label: "Estimated budget range"
        hint: "E.g., '$100k–$250k', '$1M–$2M', 'Unknown, but likely under $500k'. This is for context only, not a binding commitment."
        required: true

  - id: soo_inputs
    title: "SOO inputs (Objectives and Constraints only)"
    help: "Tasks and requirements are blocked here. Objectives are outcomes. Constraints are boundaries."
    gateLint: true
    fields:
      - id: problem_context
        type: textarea
        label: "Problem context (current state only)"
        hint: "No solutioning. Describe impacts and gaps. Example: 'Citizens cannot renew licenses online, requiring 4-6 week wait in-person.'"
        rows: 7
      - id: objectives
        type: textarea
        label: "Objectives (one per line)"
        hint: "Outcomes only. Example: 'Reduce time-to-complete license renewal from 4–6 weeks to under 2 hours'."
        rows: 8
      - id: constraints
        type: textarea
        label: "Constraints (one per line)"
        hint: "Compliance, schedule, environment, data handling, standards. Example: 'Comply with FedRAMP Moderate' or 'Deploy by Q4 2025' or 'Operate within existing Azure environment'."
        rows: 8

  - id: vision
    title: "Product Vision Board (3–5 year true north)"
    help: 'Focus on outcomes and user experience. Do not describe tasks or solutions. For more information on how to build a product reference, see the <a href="https://techfarhub.cio.gov/" target="_blank" rel="noopener noreferrer">US Government TechFar Hub</a>.'
    fields:
      - id: vision
        type: textarea
        label: "Vision"
        hint: "3–5 years. A clear outcome statement."
        rows: 4
      - id: target_group
        type: textarea
        label: "Target group"
        hint: "Who are the primary users?"
        rows: 3
      - id: needs
        type: textarea
        label: "Needs (current state pain points)"
        hint: "Describe what is broken today and why it matters."
        rows: 6
      - id: product
        type: textarea
        label: "Product (key capabilities framed as outcomes, not features)"
        rows: 5
      - id: business_goals
        type: textarea
        label: "Business goals"
        hint: "Strategic outcomes you expect from this product"
        rows: 4

  - id: positioning_statement
    title: "Product Positioning Statement"
    help: |
      <div class="usa-prose margin-bottom-1" style="font-size:1.1em;">Based on Geoffrey Moore’s positioning statement (Crossing the Chasm).</div>
      This step compresses your Product Vision Board into a single, defensible positioning statement. Do not introduce new users, needs, or outcomes here. If you change them here, go back and update the Product Vision Board.
      
      <div class="usa-prose margin-top-2" style="font-weight:600;">Mode: Synthesis, not discovery</div>
    fields:
      - id: target_customer
        type: textarea
        label: "For [target customer]"
        hint: "Use: Target group (from your Product Vision Board)."
        rows: 3
      - id: customer_need
        type: textarea
        label: "who [need/problem]"
        hint: "Use: Needs / pain points (from your Product Vision Board)."
        rows: 3
      - id: product_name
        type: text
        label: "Product name"
        hint: "What is the name of your product or service?"
      - id: product_category
        type: text
        label: "Product category"
        hint: "Is it a platform, service, tool, capability?"
      - id: key_benefit
        type: textarea
        label: "Key benefit"
        hint: "Use: Vision (3–5 year outcome) (from your Product Vision Board)."
        rows: 3
      - id: alternative
        type: textarea
        label: "Unlike [alternative]"
        hint: "Name the status quo you are replacing (what users do today if you do nothing)."
        rows: 3
      - id: differentiation
        type: textarea
        label: "Our product [primary differentiation]"
        hint: "Use: Product outcomes + Business goals (from your Product Vision Board)."
        rows: 3

  - id: methodology
    title: "Methodology selector"
    help: "This does not create requirements. It changes language and suggestions later."
    fields:
      - id: context
        type: select
        label: "Primary contracting context"
        options:
          - value: "new_dev"
            label: "New development"
          - value: "legacy_maint"
            label: "Maintenance of legacy system"
          - value: "ops_support"
            label: "Operations and support"
          - value: "discovery"
            label: "Discovery or research"
          - value: "migration"
            label: "Migration"
        default: "new_dev"

  - id: soo_inputs
    title: "SOO inputs (Objectives and Constraints only)"
    help: "Tasks and requirements are blocked here. Objectives are outcomes. Constraints are boundaries."
    gateLint: true
    fields:
      - id: problem_context
        type: textarea
        label: "Problem context (current state only)"
        hint: "No solutioning. Describe impacts and gaps. Example: 'Citizens cannot renew licenses online, requiring 4-6 week wait in-person.'"
        rows: 7
      - id: objectives
        type: textarea
        label: "Objectives (one per line)"
        hint: "Outcomes only. Example: 'Reduce time-to-complete license renewal from 4–6 weeks to under 2 hours'."
        rows: 8
      - id: constraints
        type: textarea
        label: "Constraints (one per line)"
        hint: "Compliance, schedule, environment, data handling, standards. Example: 'Comply with FedRAMP Moderate' or 'Deploy by Q4 2025' or 'Operate within existing Azure environment'."
        rows: 8

  - id: soo_review_gate
    title: "SOO Review Gate"
    help: "Before generating the draft, review your SOO for compliance. Check each box to confirm."
    gateLint: false
    fields:
      - id: check_no_tasks
        type: checkbox
        label: "✓ No tasks, deliverables, or requirements language (shall, must, need to, build, implement, etc.)"
        required: true
      - id: check_problem_current_state
        type: checkbox
        label: "✓ Problem statement describes only the current state and gaps, not solutions"
        required: true
      - id: check_objectives_outcomes
        type: checkbox
        label: "✓ Objectives are outcome-based (e.g., 'Reduce X from Y to Z') and not task-based"
        required: true
      - id: check_constraints_boundaries
        type: checkbox
        label: "✓ Constraints are boundaries: compliance rules, schedule deadlines, environment limits, not tasks"
        required: true
      - id: check_vision_not_solution
        type: checkbox
        label: "✓ Vision and objectives stay outcome-focused; no technology selection or design decisions"
        required: true

  - id: generate
    title: "Generate SOO draft"
    help: "The tool will call your local AI to draft the SOO, linted for tasks/requirements. You can edit the output and regenerate."
    fields: []

  - id: soo_output
    title: "SOO Draft Review and Edit"
    help: "Review the generated SOO. You can edit it here. If you make changes, regenerate to re-lint."
    fields:
      - id: soo_draft
        type: textarea
        label: "SOO Markdown (editable)"
        hint: "Edit if needed. Click 'Regenerate' to rewrite with AI, or 'Next' to accept."
        rows: 15

  - id: pws_vendor_pack
    title: "Vendor PWS Request Pack"
    help: "Generate a vendor-facing instruction pack that asks them to propose a PWS responding to your SOO."
    fields:
      - id: pws_pack_preview
        type: textarea
        label: "PWS Request Pack (Markdown, read-only)"
        hint: "This pack will be exported. It instructs vendors on the SOO and what you expect in their PWS response."
        rows: 12
        readonly: true

  - id: export_center
    title: "Export Center"
    help: "Download your complete SOO Wizard bundle: inputs, SOO, PWS request pack, audit log, and prompts used."
    fields:
      - id: export_summary
        type: textarea
        label: "Export Summary"
        hint: "Shows what will be included in your download."
        rows: 6
        readonly: true
      - id: include_audit
        type: checkbox
        label: "Include audit.json (readiness answers, lint results, AI call details)"
        default: true
      - id: include_prompts
        type: checkbox
        label: "Include prompts.txt (all AI prompts used for transparency)"
        default: true

meta_lint:
  description: "Lint is applied to the soo_inputs step to block tasks/requirements/deliverables."
  description_2: "Lint is also applied to generated SOO output before the user sees it."
  description_3: "The soo_review_gate step is manual but required; it cannot be auto-passed."
