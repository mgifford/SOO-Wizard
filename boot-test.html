<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Boot Test</title>
</head>
<body>
  <h1>Testing App Boot...</h1>
  <div id="status">Loading...</div>
  
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script>
    async function testBoot() {
      const status = document.getElementById('status');
      try {
        // Test 1: Check if js-yaml is loaded
        if (!window.jsyaml) {
          throw new Error('js-yaml not loaded');
        }
        status.innerHTML += '<p>✅ js-yaml loaded</p>';
        
        // Test 2: Fetch flow
        const flowResp = await fetch('./content/flows/soo_wizard.yml?v=' + Date.now());
        const flowText = await flowResp.text();
        status.innerHTML += '<p>✅ Flow fetched (' + flowText.length + ' bytes)</p>';
        
        // Test 3: Parse flow
        const flow = window.jsyaml.load(flowText);
        status.innerHTML += '<p>✅ Flow parsed: ' + flow.steps.length + ' steps</p>';
        
        // Test 4: Fetch rules
        const rulesResp = await fetch('./content/lint/rules.yml?v=' + Date.now());
        const rulesText = await rulesResp.text();
        status.innerHTML += '<p>✅ Rules fetched (' + rulesText.length + ' bytes)</p>';
        
        // Test 5: Parse rules
        const rules = window.jsyaml.load(rulesText);
        status.innerHTML += '<p>✅ Rules parsed: ' + rules.lint.disallow.length + ' disallow rules</p>';
        
        status.innerHTML += '<p style="color: green;"><strong>✅ ALL TESTS PASSED</strong></p>';
      } catch (e) {
        status.innerHTML += '<p style="color: red;"><strong>❌ ERROR: ' + e.message + '</strong></p>';
        status.innerHTML += '<pre>' + e.stack + '</pre>';
      }
    }
    
    testBoot();
  </script>
</body>
</html>
