<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Debug YAML Load</title>
</head>
<body>
  <h1>Loading YAML...</h1>
  <div id="result">Loading...</div>
  
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <script>
    async function test() {
      const result = document.getElementById('result');
      try {
        // Exactly like app.js does it
        const url = './content/lint/rules.yml?t=' + Date.now();
        const r = await fetch(url);
        const txt = await r.text();
        console.log('Fetched', txt.length, 'bytes');
        console.log('First 100 chars:', txt.substring(0, 100));
        
        // This is exactly how app.js calls it
        const data = window.jsyaml.load(txt);
        
        result.innerHTML = `
          <h2 style="color: green;">✅ SUCCESS!</h2>
          <p>YAML parsed successfully</p>
          <p>Version: ${data.version}</p>
          <p>Lint rules: ${Object.keys(data.lint).join(', ')}</p>
          <p>Disallow count: ${data.lint.disallow ? data.lint.disallow.length : 'N/A'}</p>
          <p>Warn count: ${data.lint.warn ? data.lint.warn.length : 'N/A'}</p>
        `;
      } catch (e) {
        result.innerHTML = `
          <h2 style="color: red;">❌ FAILED</h2>
          <p>${e.message}</p>
          <pre style="background: #f0f0f0; padding: 10px; overflow: auto;">
${e.stack}
          </pre>
        `;
      }
    }
    
    test();
  </script>
</body>
</html>
